$def with (path,name)
$var title: $name

<h1>$name</h1>
<h2>Hello, world $:path! </h2>
$code:
    x = "you can write any python code here"
    y = x.title()
    z = len(x + y)

    def limit(s, width=20):
        """limits a string to the given width"""
        if len(s) >= width:
            return s[:width] + "..."
        else:
            return s

And we are back to template.
The variables defined in the code block can be used here.
For example, $limit(x)